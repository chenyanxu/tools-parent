<?xml version="1.0" encoding="UTF-8"?>
<!-- default-activation="lazy" -->
<blueprint
        default-activation="eager"
        xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

    <bean id="flyway" class="org.flywaydb.core.Flyway">
    </bean>

    <reference id="datasource" interface="javax.sql.DataSource"
               filter="(osgi.jndi.service.name=jdbc/ds)"/>
    <bean
            id="flyway-migrate"
            class="com.kalix.tools.flyway.DbMigrationService" init-method="doMigration">
        <property name="datasource" ref="datasource"/>
        <property name="flyway" ref="flyway"/>
    </bean>


</blueprint>